# 快速开始 - 管理员账号

## 📌 默认管理员账号

系统有一个默认的管理员账号：

- **用户名**: `admin`
- **密码**: `admin123`
- **角色**: `ADMIN`

## 🚀 快速步骤

### 1. 确保数据库中有管理员账号

**方法A：检查是否已存在**
```sql
-- 连接MySQL
mysql -u root -p

-- 使用数据库
USE media_platform;

-- 检查管理员账号
SELECT id, username, role FROM user WHERE username = 'admin';
```

如果查询结果为空，需要创建管理员账号。

**方法B：创建管理员账号**
```sql
-- 在MySQL中执行
USE media_platform;

INSERT INTO `user` (`username`, `password`, `role`, `create_time`, `update_time`) 
VALUES ('admin', 'admin123', 'ADMIN', NOW(), NOW())
ON DUPLICATE KEY UPDATE `username`=`username`;
```

**注意**：当前系统使用明文密码（未加密），所以直接插入 `'admin123'` 即可。

### 2. 启动后端服务

```bash
cd backend
# 确保后端服务正在运行
# 如果没运行，启动它
```

### 3. 启动前端服务

```bash
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

前端服务通常运行在：`http://localhost:5173`

### 4. 登录管理员账号

1. 打开浏览器访问：`http://localhost:5173/login`
2. 输入：
   - 用户名：`admin`
   - 密码：`admin123`
3. 点击"登录"

### 5. 进入管理后台

登录成功后：
- 系统会跳转到工作台
- 在**左侧导航栏**会看到"管理员"菜单项（只有管理员可见）
- 点击"管理员"即可进入管理后台

## ❓ 常见问题解决

### Q1: 前端页面显示不出来（空白页）

**可能原因和解决方法：**

1. **前端服务未启动**
   ```bash
   cd frontend
   npm run dev
   ```
   检查控制台是否有错误信息

2. **浏览器缓存问题**
   - 按 `Ctrl + Shift + R` 强制刷新
   - 或清除浏览器缓存

3. **路由问题**
   - 打开浏览器开发者工具（F12）
   - 查看 Console 标签页是否有错误
   - 查看 Network 标签页检查请求是否成功

4. **组件加载失败**
   - 检查浏览器控制台错误
   - 确认所有依赖已安装：`npm install`

### Q2: 登录后看不到"管理员"菜单

**解决方法：**

1. **检查用户角色**
   ```sql
   SELECT username, role FROM user WHERE username = 'admin';
   ```
   应该显示 `role = 'ADMIN'`

2. **清除浏览器缓存**
   - 按 `F12` 打开开发者工具
   - 在 Application/存储 标签页中
   - 清除 `localStorage` 中的 `token` 和 `userInfo`
   - 重新登录

3. **检查 localStorage**
   - 按 `F12` 打开开发者工具
   - 在 Console 中输入：
   ```javascript
   JSON.parse(localStorage.getItem('userInfo'))
   ```
   应该看到 `role: "ADMIN"`

### Q3: 无法访问 `/admin` 路由

**解决方法：**

1. **重新登录**
   - 退出登录
   - 清除浏览器缓存
   - 重新登录管理员账号

2. **检查路由守卫**
   - 打开浏览器控制台
   - 查看是否有权限错误提示

3. **手动检查**
   - 在浏览器地址栏直接输入：`http://localhost:5173/admin`
   - 如果被重定向，说明权限检查生效

### Q4: 密码忘记了

**解决方法：**

直接在数据库中重置密码：
```sql
UPDATE `user` SET `password` = '新密码' WHERE `username` = 'admin';
```

然后使用新密码登录。

### Q5: 如何创建新的管理员账号

**方法1：通过数据库**
```sql
INSERT INTO `user` (`username`, `password`, `role`, `create_time`, `update_time`) 
VALUES ('新用户名', '新密码', 'ADMIN', NOW(), NOW());
```

**方法2：先注册再改角色**
1. 在前端注册一个普通账号
2. 在数据库中修改角色：
   ```sql
   UPDATE `user` SET `role` = 'ADMIN' WHERE `username` = '你的用户名';
   ```

## 🔍 调试步骤

如果遇到问题，按以下步骤排查：

1. **检查后端服务**
   - 确认后端服务正在运行
   - 检查后端日志是否有错误

2. **检查数据库**
   ```sql
   -- 查看所有用户
   SELECT id, username, role FROM user;
   
   -- 确认管理员账号存在
   SELECT * FROM user WHERE role = 'ADMIN';
   ```

3. **检查前端服务**
   - 确认前端服务正在运行
   - 检查浏览器控制台错误
   - 检查网络请求是否成功

4. **清除缓存重新登录**
   - 清除浏览器缓存
   - 清除 localStorage
   - 重新登录

## 📝 验证清单

使用以下清单验证管理员功能：

- [ ] 数据库中有管理员账号（`role = 'ADMIN'`）
- [ ] 后端服务正在运行
- [ ] 前端服务正在运行
- [ ] 可以使用 `admin` / `admin123` 登录
- [ ] 登录后能看到"管理员"菜单
- [ ] 可以访问 `/admin` 路由
- [ ] 管理后台页面正常显示

## 🆘 仍然无法解决？

如果以上方法都无法解决问题，请：

1. 检查浏览器控制台的完整错误信息
2. 检查后端日志的完整错误信息
3. 确认数据库连接正常
4. 确认所有服务都已正确启动
